<!DOCTYPE html>
<html>
<head>
  <title>Online Food Menu</title>
  <meta charset="UTF-8">
  <style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 40px;
    background-color: #f4f4f9;
    color: #333;
  }

  h2, h3 {
    color: #1a73e8;
  }

  .menu-item {
    background: #ffffff;
    border-radius: 8px;
    border: 1px solid #ddd;
    padding: 15px;
    margin: 10px 0;
    box-shadow: 1px 2px 4px rgba(0,0,0,0.1);
  }

  .menu-item button {
    margin-top: 10px;
    padding: 6px 12px;
    background-color: #1a73e8;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }

  .menu-item button:hover {
    background-color: #0f5dc9;
  }

  .cart {
    margin-top: 30px;
    padding: 20px;
    background-color: #fffbe6;
    border-radius: 8px;
    border: 1px solid #ddd;
  }

  #cart div {
    margin-bottom: 8px;
  }

  #cart button {
    padding: 2px 8px;
    background-color: #d9534f;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    margin-left: 8px;
  }

  #cart button:hover {
    background-color: #c9302c;
  }

  input[type="text"] {
    padding: 6px;
    width: 300px;
    margin: 6px 0;
    border: 1px solid #ccc;
    border-radius: 4px;
  }

  input[readonly] {
    background-color: #f0f0f0;
  }

  button {
    padding: 10px 16px;
    background-color: #28a745;
    color: white;
    font-weight: bold;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    margin-top: 10px;
  }

  button:hover {
    background-color: #218838;
  }

  .customer-form {
    margin-top: 30px;
    padding: 20px;
    background-color: #e3f2fd;
    border-radius: 8px;
    border: 1px solid #cbd5e0;
  }
</style>
    <script>
    let cart = [];

    async function loadMenu() {
      const res = await fetch('http://localhost:8080/api/menu');
      const data = await res.json();
      let menuHtml = '';
      data.forEach(item => {
        menuHtml += `<div class="menu-item">
          <strong>${item.name}</strong> - ₹${item.price}<br>
          <em>${item.description}</em><br>
          <button onclick='addToCart(${JSON.stringify(item)})'>Add to Cart</button>
        </div>`;
      });
      document.getElementById('menu').innerHTML = menuHtml;
    }

    function addToCart(item) {
      cart.push(item);
      renderCart();
    }

    function renderCart() {
      let cartHtml = '';
      let total = 0;
      cart.forEach((item, index) => {
        total += item.price;
        cartHtml += `<div>${item.name} - ₹${item.price} <button onclick="removeItem(${index})">Remove</button></div>`;
      });
      document.getElementById('cart').innerHTML = cartHtml;
      document.getElementById('total').value = total.toFixed(2);
    }

    function removeItem(index) {
      cart.splice(index, 1);
      renderCart();
    }

    async function placeOrder() {
      if (cart.length === 0) return alert("Cart is empty!");

      const order = {
        customerName: document.getElementById('name').value,
        address: document.getElementById('address').value,
        phone: document.getElementById('phone').value,
        items: cart.map(item => item.name),
        total: parseFloat(document.getElementById('total').value)
      };

      const res = await fetch('http://localhost:8080/api/order', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(order)
      });

      const text = await res.text();
      alert(text);
      cart = [];
      renderCart();
    }

    window.onload = loadMenu;
  </script>
</head>
<body>
  <h2>Online Food Menu</h2>
  <div id="menu"></div>

  <div class="cart">
    <h3>Your Cart</h3>
    <div id="cart"></div>
    <strong>Total: ₹<input type="text" id="total" readonly></strong>
  </div>

  <div style="margin-top: 20px;">
    <h3>Customer Info</h3>
    Name: <input type="text" id="name"><br>
    Address: <input type="text" id="address"><br>
    Phone: <input type="text" id="phone"><br><br>
    <button onclick="placeOrder()">Place Order</button>
  </div>
</body>
</html>
